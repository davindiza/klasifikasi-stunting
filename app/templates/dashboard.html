{% extends "layout.html" %} {% block title %}Dashboard - Puskesmas{% endblock %}
{% block content %}
<h1 class="h3 mb-4 text-gray-800">Dashboard</h1>

<div class="row">
  <!-- Earnings (Monthly) Card Example -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-primary shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div
              class="text-xs font-weight-bold text-primary text-uppercase mb-1"
            >
              Jumlah Anak
            </div>
            <div class="h5 mb-0 font-weight-bold text-gray-800" type="number">
              {{ data.total_anak }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-child fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--jumlah anak Normal-->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-success shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div
              class="text-xs font-weight-bold text-success text-uppercase mb-1"
            >
              jumlah Anak Normal
            </div>
            <div class="h5 mb-0 font-weight-bold text-gray-800" type="number">
              {{ data.total_normal }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-plus fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- jumlah anak stunting -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-warning shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div
              class="text-xs font-weight-bold text-warning text-uppercase mb-1"
            >
              Jumlah Anak Stunting
            </div>
            <div class="row no-gutters align-items-center">
              <div class="col-auto">
                <div
                  class="h5 mb-0 mr-3 font-weight-bold text-gray-800"
                  type="number"
                >
                  {{ data.total_stunting }}
                </div>
              </div>
              <div class="col"></div>
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-minus fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pending Requests Card Example -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-danger shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div
              class="text-xs font-weight-bold text-danger text-uppercase mb-1"
            >
              Jumlah Anak Stunting Parah
            </div>
            <div class="h5 mb-0 font-weight-bold text-gray-800" type="number">
              {{ data.total_stunting_parah }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-exclamation-triangle fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Content Row -->

<div class="row">
  <!-- Pie Chart -->
  <div class="col-12 col-lg-6">
    <div class="card shadow mb-4">
      <!-- Card Header - Dropdown -->
      <div
        class="card-header py-3 d-flex flex-row align-items-center justify-content-between"
      >
        <h6 class="m-0 font-weight-bold text-primary">
          Persebaran Status Gizi
        </h6>
        <div class="dropdown no-arrow">
          <a
            class="dropdown-toggle"
            href="#"
            role="button"
            id="dropdownMenuLink"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
          </a>
          <div
            class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
            aria-labelledby="dropdownMenuLink"
          >
            <div class="dropdown-header">Dropdown Header:</div>
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </div>
      </div>
      <!-- Card Body -->
      <div class="card-body">
        <div class="chart-pie pt-4 pb-2">
          <canvas id="totalDataChart"></canvas>
        </div>
        <div class="mt-4 text-center small">
          <span class="mr-2">
            <i class="fas fa-circle text-success"></i> Jumlah Anak Normal
          </span>
          <span class="mr-2">
            <i class="fas fa-circle text-warning"></i> Jumlah Anak Stunting
          </span>
          <span class="mr-2">
            <i class="fas fa-circle text-danger"></i> Jumlah Anak Stunting Parah
          </span>
        </div>
      </div>
    </div>
  </div>
  <div class="col-12 col-lg-6">
    <!-- Approach -->
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">
          About Puskesmas Pagar Merbau
        </h6>
      </div>
      <div class="card-body">
        <p class="text-justify">
          Puskesmas Pagar Merbau memiliki visi “Terwujudnya masyarakat Pagar
          Merbau yang sehat, mandiri, dan berkeadilan melalui pelayanan
          kesehatan yang profesional, bermutu, dan terjangkau.” Untuk mewujudkan
          visi tersebut, Puskesmas berkomitmen menyediakan layanan kesehatan
          yang cepat, tepat, dan berkualitas bagi seluruh masyarakat. Selain
          itu, Puskesmas juga meningkatkan upaya promotif dan preventif melalui
          edukasi dan pemberdayaan masyarakat agar mampu hidup sehat secara
          mandiri. Pengembangan tenaga kesehatan yang profesional dan
          berintegritas, penguatan kerja sama lintas sektor, serta pemanfaatan
          sistem informasi berbasis teknologi menjadi bagian penting dari upaya
          mewujudkan pelayanan kesehatan yang efisien, akuntabel, dan
          berkelanjutan.
        </p>
        <p class="mb-0"></p>
      </div>
    </div>
  </div>
</div>

<script>
  const totalDataChartCtx = document.getElementById("totalDataChart").getContext("2d");

  const flaskData = {{ chart_data|tojson }};
  const chartData = JSON.parse(flaskData);

  new Chart(totalDataChartCtx, {
    type: "doughnut",
    data: {
      labels: chartData.labels,
      datasets: [
        {
          data: chartData.values,
          backgroundColor: ["#04e000", "#ffd700", "#dc143c"],
          hoverBackgroundColor: ["#198754", "#17a673", "#2c9faf"],
          hoverBorderColor: "rgba(234, 236, 244, 1)",
        },
      ],
    },
    options: {
      maintainAspectRatio: false,
      tooltips: {
        backgroundColor: "rgb(255,255,255)",
        bodyFontColor: "#858796",
        borderColor: "#dddfeb",
        borderWidth: 1,
        xPadding: 15,
        yPadding: 15,
        displayColors: false,
        caretPadding: 10,
      },
      legend: {
        display: false,
      },
      cutoutPercentage: 80,
    },
  });
</script>
{% endblock %}
